!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.anime=e()}(this,()=>{const t={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},e={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},n=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skewX","skewY","perspective"];let i;function r(t,e){return t.indexOf(e)>-1}const a={arr:t=>Array.isArray(t),obj:t=>r(Object.prototype.toString.call(t),"Object"),pth:t=>a.obj(t)&&t.hasOwnProperty("totalLength"),svg:t=>t instanceof SVGElement,dom:t=>t.nodeType||a.svg(t),str:t=>"string"==typeof t,fnc:t=>"function"==typeof t,und:t=>void 0===t,hex:t=>/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t),rgb:t=>/^rgb/.test(t),hsl:t=>/^hsl/.test(t),col:t=>a.hex(t)||a.rgb(t)||a.hsl(t)},o=(()=>{function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function n(t){return 3*t}function i(i,r,a){return((t(r,a)*i+e(r,a))*i+n(r))*i}function r(i,r,a){return 3*t(r,a)*i*i+2*e(r,a)*i+n(r)}return function(t,e,n,a){if(!(0<=t&&t<=1&&0<=n&&n<=1))return;let o=new Float32Array(11);if(t!==e||n!==a)for(let r=0;r<11;++r)o[r]=i(.1*r,t,n);return s=>t===e&&n===a?s:0===s?0:1===s?1:i(function(e){let a=0,s=1;for(;10!==s&&o[s]<=e;++s)a+=.1;const c=a+(e-o[--s])/(o[s+1]-o[s])*.1,h=r(c,t,n);return h>=.001?function(t,e,n,a){for(let o=0;o<4;++o){const o=r(e,n,a);if(0===o)return e;e-=(i(e,n,a)-t)/o}return e}(e,c,t,n):0===h?c:function(t,e,n,r,a){let o,s,c=0;do{(o=i(s=e+(n-e)/2,r,a)-t)>0?n=s:e=s}while(Math.abs(o)>1e-7&&++c<10);return s}(e,a,a+.1,t,n)}(s),e,a)}})(),s=(()=>{const t=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"];function e(t,e){return 0===t||1===t?t:-Math.pow(2,10*(t-1))*Math.sin((t-1-e/(2*Math.PI)*Math.asin(1))*(2*Math.PI)/e)}const n={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],(t,n)=>1-e(1-t,n)],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],(t,n)=>t<.5?e(2*t,n)/2:1-e(-2*t+2,n)/2]};let i={linear:o(.25,.25,.75,.75)};for(let r in n)n[r].forEach((e,n)=>{i["ease"+r+t[n]]=a.fnc(e)?e:o.apply(this,e)});return i})();function c(t){if(!a.col(t))try{return document.querySelectorAll(t)}catch(t){return}}function h(t,e){const n=t.length,i=arguments.length>=2?arguments[1]:void 0;let r=[];for(let a=0;a<n;a++)if(a in t){const n=t[a];e.call(i,n,a,t)&&r.push(n)}return r}function u(t){return t.reduce((t,e)=>t.concat(a.arr(e)?u(e):e),[])}function l(t){return a.arr(t)?t:(a.str(t)&&(t=c(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function f(t,e){return t.some(t=>t===e)}function d(t){let e={};for(let n in t)e[n]=t[n];return e}function g(t,e){let n=d(t);for(let i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function m(t,e){let n=d(t);for(let i in e)n[i]=a.und(t[i])?e[i]:t[i];return n}function p(t){const e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[2]}function y(t,e,n){return Math.min(Math.max(t,e),n)}function x(t,e){return a.fnc(t)?t(e.target,e.id,e.total):t}function v(t,e){if(e in t.style)return getComputedStyle(t).getPropertyValue(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function w(t,e){return a.dom(t)&&f(n,e)?"transform":a.dom(t)&&(t.getAttribute(e)||a.svg(t)&&t[e])?"attribute":a.dom(t)&&"transform"!==e&&v(t,e)?"css":null!=t[e]?"object":void 0}function b(t,e){switch(w(t,e)){case"transform":return function(t,e){const n=function(t){return r(t,"translate")||"perspective"===t?"px":r(t,"rotate")||r(t,"skew")?"deg":void 0}(e),i=r(e,"scale")?1:0+n,a=t.style.transform;if(!a)return i;let o=[],s=[],c=[];const u=/(\w+)\((.+?)\)/g;for(;o=u.exec(a);)s.push(o[1]),c.push(o[2]);const l=h(c,(t,n)=>s[n]===e);return l.length?l[0]:i}(t,e);case"css":return v(t,e);case"attribute":return t.getAttribute(e)}return t[e]||0}function S(t,e){const n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;const i=p(t)||0,r=parseFloat(e),a=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+a+i;case"-":return r-a+i;case"*":return r*a+i}}function k(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function I(t){const e=t.points;let n,i=0;for(let r=0;r<e.numberOfItems;r++){const t=e.getItem(r);r>0&&(i+=k(n,t)),n=t}return i}function P(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*t.getAttribute("r")}(t);case"rect":return function(t){return 2*t.getAttribute("width")+2*t.getAttribute("height")}(t);case"line":return function(t){return k({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")})}(t);case"polyline":return I(t);case"polygon":return function(t){const e=t.points;return I(t)+k(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function M(t,e){function n(n=0){return t.el.getPointAtLength(e+n>=1?e+n:0)}const i=n(),r=n(-1),a=n(1);switch(t.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}function _(t,e){const n=/-?\d*\.?\d+/g,i=function(t,e){if(a.col(t))return function(t){return a.rgb(t)?function(t){const e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?`rgba(${e[1]},1)`:t}(t):a.hex(t)?function(e){const n=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,e,n,i)=>e+e+n+n+i+i),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return`rgba(${parseInt(i[1],16)},${parseInt(i[2],16)},${parseInt(i[3],16)},1)`}():a.hsl(t)?function(t){const e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(e[1])/360,i=parseInt(e[2])/100,r=parseInt(e[3])/100,a=e[4]||1;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}let s,c,h;if(0==i)s=c=h=r;else{const t=r<.5?r*(1+i):r+i-r*i,e=2*r-t;s=o(e,t,n+1/3),c=o(e,t,n),h=o(e,t,n-1/3)}return`rgba(${255*s},${255*c},${255*h},${a})`}(t):void 0}(t);const n=p(t),i=n?t.substr(0,t.length-n.length):t;return e&&!/\s/g.test(t)?i+e:i}(a.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:a.str(t)||e?i.split(n):[]}}function A(t){return h(t?u(a.arr(t)?t.map(l):l(t)):[],(t,e,n)=>n.indexOf(t)===e)}function O(t,e){let n=d(e);if(a.arr(t)){const i=t.length;2!==i||a.obj(t[0])?a.fnc(e.duration)||(n.duration=e.duration/i):t={value:t}}return l(t).map((t,n)=>{const i=n?0:e.delay;let r=a.obj(t)&&!a.pth(t)?t:{value:t};return a.und(r.delay)&&(r.delay=i),r}).map(t=>m(t,n))}const E={css:(t,e,n)=>t.style[e]=n,attribute:(t,e,n)=>t.setAttribute(e,n),object:(t,e,n)=>t[e]=n,transform:(t,e,n,i,r)=>{i[r]||(i[r]=[]),i[r].push(`${e}(${n})`)}};function L(t,e,n,i){const r="delay"===t;return e.length?(r?Math.min:Math.max).apply(Math,e.map(e=>e[t])):r?i.delay:n.offset+i.delay+i.duration}let C=[],R=0;const T=(()=>{function t(){R=requestAnimationFrame(e)}function e(e){const n=C.length;if(n){let i=0;for(;i<n;)C[i]&&C[i].tick(e),i++;t()}else cancelAnimationFrame(R),R=0}return t})();function F(n={}){let r,c,l=0,f=null;function d(){return window.Promise&&new Promise(t=>f=t)}let k=d(),I=function(n){const i=g(t,n),r=g(e,n),c=function(t){const e=A(n.targets);return e.map((t,n)=>({target:t,id:n,total:e.length}))}(),l=function(t,e){return h(u(t.map(t=>e.map(e=>(function(t,e){const n=w(t.target,e.name);if(n){const i=function(t,e){let n;return t.tweens.map(i=>{let r=function(t,e){let n={};for(let i in t){let r=x(t[i],e);a.arr(r)&&1===(r=r.map(t=>x(t,e))).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,e);const c=r.value,h=b(e.target,t.name),u=n?n.to.original:h,l=a.arr(c)?c[0]:u,f=S(a.arr(c)?c[1]:c,l),d=p(f)||p(l)||p(h);return r.from=_(l,d),r.to=_(f,d),r.start=n?n.end:t.offset,r.end=r.start+r.delay+r.duration,r.easing=function(t){return a.arr(t)?o.apply(this,t):s[t]}(r.easing),r.elasticity=(1e3-y(r.elasticity,1,999))/1e3,r.isPath=a.pth(c),r.isColor=a.col(r.from.original),r.isColor&&(r.round=1),n=r,r})}(e,t);return{type:n,property:e.name,animatable:t,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}})(t,e)))),t=>!a.und(t))}(c,function(t,e,n){let i=[];const r=m(t,e);for(let a in n)r.hasOwnProperty(a)||"targets"===a||i.push({name:a,offset:r.offset,tweens:O(n[a],e)});return i}(i,r,n));return m(i,{children:[],animatables:c,animations:l,duration:L("duration",l,i,r),delay:L("delay",l,i,r)})}(n);function P(){I.reversed=!I.reversed}function Y(t){return I.reversed?I.duration-t:t}function $(t){let e=0,n={};const r=I.animations,a=r.length;for(;e<a;){const i=r[e],a=i.animatable,o=i.tweens,s=o.length-1;let c=o[s];s&&(c=h(o,e=>t<e.end)[0]||c);const u=y(t-c.start-c.delay,0,c.duration)/c.duration,l=isNaN(u)?1:c.easing(u,c.elasticity),f=c.to.strings,d=c.round;let g,m=[];const p=c.to.numbers.length;for(let t=0;t<p;t++){let e;const n=c.to.numbers[t],i=c.from.numbers[t];e=c.isPath?M(c.value,l*n):i+l*(n-i),d&&(c.isColor&&t>2||(e=Math.round(e*d)/d)),m.push(e)}const x=f.length;if(x){g=f[0];for(let t=0;t<x;t++){const e=f[t+1],n=m[t];isNaN(n)||(g+=e?n+e:n+" ")}}else g=m[0];E[i.type](a.target,i.property,g,n,a.id),i.currentValue=g,e++}const o=Object.keys(n).length;if(o)for(let s=0;s<o;s++){if(!i){const t="transform";i=v(document.body,t)?t:`-webkit-${t}`}I.animatables[s].target.style[i]=n[s].join(" ")}I.currentTime=t,I.progress=t/I.duration*100}function j(t){I[t]&&I[t](I)}function D(){I.remaining&&!0!==I.remaining&&I.remaining--}function W(t){const e=I.duration,n=I.offset,i=n+I.delay,a=I.currentTime,o=I.reversed,s=Y(t);I.children.length&&function(t){const e=I.children,n=e.length;if(t>=I.currentTime)for(let i=0;i<n;i++)e[i].seek(t);else for(let i=n;i--;)e[i].seek(t)}(s),(s>=i||!e)&&(I.began||(I.began=!0,j("begin")),j("run")),s>n&&s<e?$(s):(s<=n&&0!==a&&($(0),o&&D()),(s>=e&&a!==e||!e)&&($(e),o||D())),j("update"),t>=e&&(I.remaining?(c=r,"alternate"===I.direction&&P()):(I.pause(),I.completed||(I.completed=!0,j("complete"),"Promise"in window&&(f(),k=d()))),l=0)}return I.reset=function(){const t=I.direction,e=I.loop;I.currentTime=0,I.progress=0,I.paused=!0,I.began=!1,I.completed=!1,I.reversed="reverse"===t,I.remaining="alternate"===t&&1===e?2:e,$(0);for(let n=I.children.length;n--;)I.children[n].reset()},I.tick=function(t){r=t,c||(c=r),W((l+r-c)*F.speed)},I.seek=function(t){W(Y(t))},I.pause=function(){const t=C.indexOf(I);t>-1&&C.splice(t,1),I.paused=!0},I.play=function(){I.paused&&(I.paused=!1,c=0,l=Y(I.currentTime),C.push(I),R||T())},I.reverse=function(){P(),c=0,l=Y(I.currentTime)},I.restart=function(){I.pause(),I.reset(),I.play()},I.finished=k,I.reset(),I.autoplay&&I.play(),I}return F.version="2.2.0",F.speed=1,F.running=C,F.remove=function(t){const e=A(t);for(let n=C.length;n--;){const t=C[n],i=t.animations;for(let n=i.length;n--;)f(e,i[n].animatable.target)&&(i.splice(n,1),i.length||t.pause())}},F.getValue=b,F.path=function(t,e){const n=a.str(t)?c(t)[0]:t,i=e||100;return function(t){return{el:n,property:t,totalLength:P(n)*(i/100)}}},F.setDashoffset=function(t){const e=P(t);return t.setAttribute("stroke-dasharray",e),e},F.bezier=o,F.easings=s,F.timeline=function(t){let n=F(t);return n.pause(),n.duration=0,n.add=function(i){return n.children.forEach(t=>{t.began=!0,t.completed=!0}),l(i).forEach(i=>{let r=m(i,g(e,t||{}));r.targets=r.targets||t.targets;const o=n.duration,s=r.offset;r.autoplay=!1,r.direction=n.direction,r.offset=a.und(s)?o:S(s,o),n.began=!0,n.completed=!0,n.seek(r.offset);const c=F(r);c.began=!0,c.completed=!0,c.duration>o&&(n.duration=c.duration),n.children.push(c)}),n.seek(0),n.reset(),n.autoplay&&n.restart(),n},n},F.random=((t,e)=>Math.floor(Math.random()*(e-t+1))+t),F}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Pieces",e):t.Pieces=e()}(this,function(){"use strict";function t(t){this.reset(t)}t.prototype={reset:function(t){this.m=[1,0,0,1,0,0],t&&this.apply(t)},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;this.m[0]=this.m[0]*e+this.m[2]*n,this.m[1]=i,this.m[2]=r,this.m[3]=a},translate:function(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e},transformPoint:function(t,e){return[t*this.m[0]+e*this.m[2]+this.m[4],t*this.m[1]+e*this.m[3]+this.m[5]]},apply:function(t){t.setTransform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])}};var e={arr:function(t){return Array.isArray(t)},obj:function(t){return Object.prototype.toString.call(t).indexOf("Object")>-1},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},num:function(t){return"number"==typeof t}};function n(t,n){for(var i in n)t[i]=e.arr(n[i])?n[i].slice(0):n[i];return t}function i(t,e){t||(t={});for(var i=1;i<arguments.length;i++)n(t,arguments[i]);return t}function r(t,e){t.push.apply(t,e)}function a(){var t=document.createElement("canvas");return{canvas:t,ctx:t.getContext("2d")}}function o(t,n){n.forEach(function(n){e.arr(t[n])||(t[n]=e.und(t[n])?[]:[t[n]])})}function s(t,n,i,r){var a=void 0;return i.forEach(function(i){e.und(a=t[i][n])||(r[i]=a)}),r}function c(t,e,n){return!n.some(function(n){return t[n]!==e[n]})}function h(t,e,n){n.forEach(function(n){return t[n]=e[n]})}function u(t){return t>=0?t%360:t%360+360}function l(t,e,n,i,r,a){return i<2*a&&(a=i/2),r<2*a&&(a=r/2),t.beginPath(),t.moveTo(e+a,n),t.arcTo(e+i,n,e+i,n+r,a),t.arcTo(e+i,n+r,e,n+r,a),t.arcTo(e,n+r,e,n,a),t.arcTo(e,n,e+i,n,a),t.closePath(),t}function f(t){var e=i({},this.defaults.animation,t.animation);this.init(i({},this.defaults,t,{animation:e}))}return f.prototype={defaults:{canvas:null,items:[],image:[],text:[],path:[],x:0,y:0,w:[0],h:[0],tx:[0],ty:[0],itemSeparation:1,piecesWidth:[5],piecesSpacing:[5],extraSpacing:[{extraX:0,extraY:0}],angle:[0],rotate:[0],translate:[{translateX:0,translateY:0}],padding:[0],opacity:[1],fontFamily:["sans-serif"],fontSize:[100],fontWeight:[900],color:["#000"],backgroundColor:!1,backgroundRadius:0,ghostOpacity:0,checkHover:!1,animation:{duration:[1e3],delay:[0],easing:["easeInOutCubic"]},saveShowState:!1,debug:!1,ready:null},init:function(t){var e=this;this.initOptions(t),this.initCanvas(t),this.initEvents(t),t.items.length&&t.items.forEach(function(n){switch(e.setItemOptions(t,n.options),n.type){case"image":return e.initImage(n.value);case"text":return e.initText(n.value);case"path":return e.initPath(n.value)}}),t.image.length&&t.image.forEach(function(n){e.setItemOptions(t),e.initImage(n)}),t.text.length&&t.text.forEach(function(n){e.setItemOptions(t),e.initText(n)}),t.path.length&&t.path.forEach(function(n){e.setItemOptions(t),e.initPath(n)}),this.drawList.length&&(this.initPieces(t),this.loop(t)),t.ready&&t.ready()},initOptions:function(t){var n=t.canvas;e.str(n)&&(t.canvas=document.querySelector(n)),o(t,["items","image","text","path","w","h","tx","ty","piecesWidth","piecesSpacing","extraSpacing","angle","rotate","translate","svgWidth","svgHeight","color","backgroundColor","backgroundRadius","padding","opacity","fontFamily","fontSize","fontWeight","ghost","ghostOpacity"]),o(t.animation,["duration","delay","easing"]),this.v={},this.o=[],this.drawList=[]},initCanvas:function(t){t.canvas?t.ctx=t.canvas.getContext("2d"):i(t,a()),this.width=t.canvas.width,this.height=t.canvas.height},initEvents:function(t){var e=this;t.canvas.onmousemove=function(n){var i=t.canvas.getBoundingClientRect(),r=n.clientY-i.top,a=i.height/t.canvas.offsetHeight;e.mouseX=1/(i.width/t.canvas.offsetWidth)*(n.clientX-i.left),e.mouseY=r*(1/a)},t.canvas.onmouseout=function(){e.mouseX=void 0,e.mouseY=void 0}},setItemOptions:function(t,e){var n=this.drawList.length;s(t,n,["text","color","backgroundColor","backgroundRadius","padding","fontFamily","fontSize","fontWeight","svgWidth","svgHeight","piecesWidth","piecesSpacing","extraSpacing","opacity","angle","rotate","translate","ghost","ghostOpacity","w","h","tx","ty"],this.v),s(t.animation,n,["duration","delay","easing"],this.v),this.o.push(i({},this.v,e||{}))},initImage:function(t){var n=this.o[this.o.length-1],i=e.fnc(n.padding)?n.padding():n.padding;i=i?i.split(" ").map(function(t){return parseFloat(t)}):[0,0,0,0];var r=a(),o=r.canvas,s=r.ctx;o.width=t.width+2+i[1]+i[3],o.height=t.height+2+i[0]+i[2],n.backgroundColor&&(s.fillStyle=n.backgroundColor,n.backgroundRadius?(l(s,1,1,o.width-2,o.height-2,n.backgroundRadius),s.fill()):s.fillRect(1,1,o.width-2,o.height-2)),s.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,1+i[3],1+i[0],t.width,t.height),this.drawList.push(o)},initText:function(t){var n=this.o[this.o.length-1],i=e.fnc(n.padding)?n.padding():n.padding;i=i?i.split(" ").map(function(t){return parseFloat(t)}):[0,0,0,0];var r=e.fnc(n.fontSize)?n.fontSize():n.fontSize,o=a(),s=o.canvas,c=o.ctx;c.textBaseline="bottom",c.font=n.fontWeight+" "+r+"px "+n.fontFamily,s.width=c.measureText(t).width+i[1]+i[3],s.height=r+i[0]+i[2],n.backgroundColor&&(c.fillStyle=n.backgroundColor,n.backgroundRadius?(l(c,1,1,s.width-2,s.height-2,n.backgroundRadius),c.fill()):c.fillRect(1,1,s.width-2,s.height-2)),c.textBaseline="bottom",c.font=n.fontWeight+" "+r+"px "+n.fontFamily,c.fillStyle=n.color,c.fillText(t,i[3],r+i[0]),this.drawList.push(s)},initPath:function(t){var n=this.o[this.o.length-1],i=e.fnc(n.padding)?n.padding():n.padding;i=i?i.split(" ").map(function(t){return parseFloat(t)}):[0,0,0,0];var r=a(),o=r.canvas,s=r.ctx;o.width=n.svgWidth+i[1]+i[3],o.height=n.svgHeight+i[0]+i[2],n.backgroundColor&&(s.fillStyle=n.backgroundColor,n.backgroundRadius?(l(s,1,1,o.width-2,o.height-2,n.backgroundRadius),s.fill()):s.fillRect(1,1,o.width-2,o.height-2)),s.translate(i[3],i[0]),s.fillStyle=n.color,s.fill(new Path2D(e.str(t)?t:t.getAttribute("d"))),this.drawList.push(o)},initPieces:function(n){var i=this,r=new t,o=void 0,s=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0,g=void 0,m=void 0,p=void 0,y=void 0;this.pieces=[],this.items=[];var x=n.itemSeparation;d="center"===n.x?this.width/2-(this.drawList.reduce(function(t,e){return t+e.width},0)+x*this.drawList.length)/2:n.x,m="center"===n.y?this.height/2-this.drawList[0].height/2:n.y;var v=void 0;this.drawList.forEach(function(t,w){var b=e.obj((v=i.o[w]).extraSpacing)?v.extraSpacing:{extraX:v.extraSpacing,extraY:v.extraSpacing},S=b.extraX,k=b.extraY,I=e.fnc(v.translate)?v.translate():e.obj(v.translate)?v.translate:{translateX:v.translate,translateY:v.translate};"centerAll"===n.x&&(d=i.width/2-t.width/2),"centerAll"===n.y&&(m=i.height/2-t.height/2),(h={last:l={angle:null},index:w,y:m+=I.translateY,extraY:k,img:t}).x=g=d+=I.translateX,h.width=t.width,h.height=t.height,h.angle=u(v.angle),h.rotate=u(v.rotate),h.ghost=v.ghost,h.ghostDashArray=[20,10],h.ghostDashOffset=h.ghostDashArray[0]+h.ghostDashArray[1],h.ghostOpacity=v.ghostOpacity,h.pieces=[],h.shown=!1,h.hidden=!0,i.items.push(h);var P=a(),M=P.ctx,_=P.canvas;for(_.width=h.width,_.height=h.height;g-(h.width+2*S)<h.x;){o=e.fnc(v.piecesWidth)?v.piecesWidth():v.piecesWidth,s=h.height+2*k,c=e.fnc(v.piecesSpacing)?v.piecesSpacing():v.piecesSpacing,p=Math.min(e.fnc(v.w)?v.w():v.w,o),y=Math.min(e.fnc(v.h)?v.h():v.h,s),(f={last:l={},item:h}).h_x=f.x=l.x=g-S+o/2-p/2,f.s_x=g-S,f.h_y=f.y=l.y=m+h.height/2-y/2,f.s_y=m-k,f.h_w=f.w=l.w=p,f.s_w=o,f.h_h=f.h=l.h=y,f.s_h=s,f.h_tx=f.s_tx=f.tx=l.tx=e.fnc(v.tx)?v.tx():v.tx,f.h_ty=f.ty=l.ty=k+(e.fnc(v.ty)?v.ty():v.ty),f.s_ty=k,f.opacity=e.fnc(v.opacity)?v.opacity():v.opacity,f.duration=e.fnc(v.duration)?v.duration():v.duration,f.delay=e.fnc(v.delay)?v.delay():v.delay,f.easing=v.easing,h.pieces.push(f),i.pieces.push(f),g+=o+c,M.save(),r.translate(h.width/2,h.height/2),r.rotate(h.angle*Math.PI/180),r.translate(-h.width/2,-h.height/2),r.translate(f.s_tx,f.s_ty-h.extraY),r.translate(f.s_x+f.s_w/2-h.x,f.s_y+f.s_h/2-h.y),r.apply(M),M.beginPath(),M.rect(-f.s_w/2,-f.s_h/2,f.s_w,f.s_h),M.clip(),r.reset(M),M.globalAlpha=f.opacity;var A=h.img.height/h.img.width;M.drawImage(h.img,(1-A)/2,A/2,h.img.width-(1-A),h.img.height-A),M.restore()}h.imgShown=_,h.rectShown={left:h.x,top:h.y,right:h.x+h.width,bottom:h.y+h.height},"centerAll"!==n.x&&(d+=t.width+x)})},renderPieces:function(e,n){var i=e.ctx,r=new t,a=void 0,o=void 0;n.redraw&&(n.redraw=!1,n.shown&&e.saveShowState?i.drawImage(n.imgShown,0,0,n.width,n.height,n.x,n.y,n.width,n.height):n.hidden||(a=u(n.angle),o=u(n.rotate),n.pieces.forEach(function(t){i.save(),r.translate(n.x,n.y),r.translate(n.width/2,n.height/2),r.rotate((a+o)*Math.PI/180),r.translate(-n.width/2,-n.height/2),r.translate(t.tx,t.ty-n.extraY),r.translate(t.x+t.w/2-n.x,t.y+t.h/2-n.y),r.apply(i),i.beginPath(),i.rect(-t.w/2,-t.h/2,t.w,t.h),e.debug?(i.setLineDash([]),i.strokeStyle="black",i.stroke()):i.clip(),r.translate(-(t.x+t.w/2-n.x),-(t.y+t.h/2-n.y)),r.translate(n.width/2,n.height/2),r.rotate(-a*Math.PI/180),r.translate(-n.width/2,-n.height/2),r.apply(i),i.globalAlpha=t.opacity;var s=n.img.height/n.img.width;i.drawImage(n.img,(1-s)/2,s/2,n.img.width-(1-s),n.img.height-s),r.reset(),i.restore()})))},isItemDifferent:function(t){return!c(t,t.last,["angle"])||t.pieces.some(function(t){return!c(t,t.last,["x","y","w","h","tx","ty"])})},isItemShown:function(t){return t.pieces.every(function(t){return t.x===t.s_x&&t.y===t.s_y&&t.w===t.s_w&&t.h===t.s_h&&t.tx===t.s_tx&&t.ty===t.s_ty})},isItemHidden:function(t){return t.pieces.every(function(t){return 0===t.w&&0===t.h})},renderGhost:function(t,n){var i=this.o[n.index],r=e.fnc(i.fontSize)?i.fontSize():i.fontSize;n.ghost&&i.text&&(t.ctx.textBaseline="bottom",t.ctx.font=i.fontWeight+" "+r+"px "+i.fontFamily,t.ctx.strokeStyle=i.color,t.ctx.setLineDash(n.ghostDashArray),t.ctx.lineDashOffset=n.ghostDashOffset,t.ctx.globalAlpha=n.ghostOpacity,t.ctx.strokeText(i.text,n.x,n.y+n.height),t.ctx.globalAlpha=1)},clearRect:function(e){var n=this,i=new t,r=!1,a=void 0,o=void 0,s=void 0,c=void 0,l=void 0,f=void 0,d=void 0,g=void 0,m=void 0,p=void 0,y=void 0,x=void 0,v=void 0,w=void 0,b=void 0,S=null;for(this.items.forEach(function(t){w=u(t.angle),b=u(t.rotate),n.isItemDifferent(t)?(r=!0,v=null,t.redraw=!0,t.shown=n.isItemShown(t),t.hidden=n.isItemHidden(t),h(t.last,t,["angle"]),t.pieces.forEach(function(e){var r=e.last;i.translate(t.x,t.y),i.translate(t.width/2,t.height/2),i.rotate((w+b)*Math.PI/180),i.translate(-t.width/2,-t.height/2),i.translate(r.tx,r.ty-t.extraY),i.translate(r.x+r.w/2-t.x,r.y+r.h/2-t.y),s=r.w+2,c=r.h+2,l=i.transformPoint(a=-r.w/2-1,o=-r.h/2-1),f=i.transformPoint(a+s,o),d=i.transformPoint(a+s,o+c),g=i.transformPoint(a,o+c),m=Math.min(l[0],f[0],d[0],g[0]),p=Math.min(l[1],f[1],d[1],g[1]),y=Math.max(l[0],f[0],d[0],g[0]),x=Math.max(l[1],f[1],d[1],g[1]),v=n.extendRect(v,{left:m,top:p,right:y,bottom:x}),i.reset(),h(r,e,["x","y","w","h","tx","ty"])}),S=n.extendRect(S,v),t.rect=t.shown?t.rectShown:v):t.redraw=!1,t.hidden&&t.ghost&&(r=!0,S=n.extendRect(S,t.rectShown))});r;)r=!1,this.items.forEach(function(t){var e,i;!t.redraw&&(i=t.rect,(e=S)&&i&&e.left<=i.right&&i.left<=e.right&&e.top<=i.bottom&&i.top<=e.bottom)&&(r=!0,t.redraw=!0,S=n.extendRect(S,t.rect))});S&&(e.ctx.clearRect(S.left,S.top,S.right-S.left,S.bottom-S.top),e.debug&&(e.ctx.setLineDash([10]),e.ctx.strokeStyle="rgba(255, 0, 0, 1)",e.ctx.strokeRect(S.left,S.top,S.right-S.left,S.bottom-S.top)))},extendRect:function(t,e){return t&&e?{left:Math.max(0,Math.min(t.left,e.left)),top:Math.max(0,Math.min(t.top,e.top)),right:Math.min(this.width,Math.max(t.right,e.right)),bottom:Math.min(this.height,Math.max(t.bottom,e.bottom))}:e},checkHover:function(t,n){var i=this.mouseX>=n.x&&this.mouseX<=n.x+n.width&&this.mouseY>=n.y&&this.mouseY<=n.y+n.height;return i&&!n.hover?e.fnc(t.itemEnter)&&t.itemEnter(n):!i&&n.hover&&e.fnc(t.itemLeave)&&t.itemLeave(n),n.hover=i,i},renderDebug:function(t,e){if(t.debug){t.checkHover&&(t.ctx.fillStyle=e.hover?"rgba(255, 0, 0, 0.3)":"rgba(0, 0, 0, 0.3)",t.ctx.fillRect(e.x,e.y,e.width,e.height));var n=e.rect;n&&(t.ctx.setLineDash([]),t.ctx.strokeStyle="rgba(255, 0, 0, 0.5)",t.ctx.strokeRect(n.left,n.top,n.right-n.left,n.bottom-n.top))}},loop:function(t){var e=this;this.frame=requestAnimationFrame(this.loop.bind(this,t)),this.clearRect(t),this.hoverItem=null,this.items.forEach(function(n){t.checkHover&&e.checkHover(t,n)&&(e.hoverItem=n),e.renderPieces(t,n),e.renderGhost(t,n),e.renderDebug(t,n)})},stop:function(){cancelAnimationFrame(this.frame),anime.remove(this.items),anime.remove(this.pieces)},getPieces:function(t){var n=this,i=[];return e.und(t)?i=this.pieces:e.num(t)?i=this.items[t].pieces:e.arr(t)?t.forEach(function(t){return e.num(t)?r(i,n.items[t].pieces):r(i,t.pieces)}):i=t.pieces,i},getItems:function(t){var n=this,i=[];return e.und(t)?i=this.items:e.num(t)?i=this.items[t]:e.arr(t)?t.forEach(function(t){return e.num(t)?i.push(n.items[t]):i.push(t)}):i=t,i},animatePieces:function(t){var e=i({duration:function(t){return t.duration},delay:function(t){return t.delay},easing:function(t){return t.easing},remove:!0,singly:!1},t),n=this.getPieces(t.items);e.remove&&anime.remove(n),e.ignore&&e.ignore.forEach(function(t){return delete e[t]}),e.singly?n.forEach(function(t){return anime(i(e,{targets:t}))}):anime(i(e,{targets:n}))},showPieces:function(t){var e=i({x:function(t){return t.s_x},y:function(t){return t.s_y},w:function(t){return t.s_w},h:function(t){return t.s_h},tx:function(t){return t.s_tx},ty:function(t){return t.s_ty}},t);this.animatePieces(e)},hidePieces:function(t){var e=i({x:function(t){return t.h_x},y:function(t){return t.h_y},w:function(t){return t.h_w},h:function(t){return t.h_h},tx:function(t){return t.h_tx},ty:function(t){return t.h_ty}},t);this.animatePieces(e)},animateItems:function(t){var e=i({easing:"linear",remove:!0},t,{targets:this.getItems(t.items)});e.remove&&anime.remove(e.targets),anime(e)}},f.version="1.0.0",f.random=anime.random,f.extend=i,f});